<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AppointEase - Services & Availability</title>
    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans antialiased"
      x-data="{
          activeTab: 'services',
          sidebarOpen: false,
          showAddServiceModal: false,
          showEditServiceModal: false,
          serviceToEdit: null,
          showAddAvailabilityModal: false,
          businessId: 1, // This should come from authentication
          services: [],
          newService: { name: '', description: '', duration: 30, price: 0 },
          availability: [],
          newAvailability: { day: 'Monday', start: '09:00', end: '17:00', active: true },
          daysOfWeek: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
          appointments: [],
          businessHours: [],
          loading: false,
          error: null,

          async init() {
              await this.loadServices();
              await this.loadAppointments();
              this.initializeAvailability();
          },

          async loadServices() {
              try {
                  this.loading = true;
                  this.error = null;
                  this.services = await getBusinessServices(this.businessId);
              } catch (err) {
                  this.error = 'Failed to load services: ' + err.message;
                  console.error(err);
              } finally {
                  this.loading = false;
              }
          },

          async loadAppointments() {
              try {
                  this.appointments = await getBusinessAppointments(this.businessId);
              } catch (err) {
                  console.error('Failed to load appointments:', err);
              }
          },

          initializeAvailability() {
              // Initialize with default business hours
              this.availability = this.daysOfWeek.map((day, index) => ({
                  id: index + 1,
                  day: day,
                  start: day === 'Saturday' ? '10:00' : '09:00',
                  end: day === 'Saturday' ? '15:00' : (day === 'Sunday' ? '00:00' : '17:00'),
                  active: day !== 'Sunday'
              }));

              this.businessHours = this.availability.map(avail => ({
                  id: avail.id,
                  day: avail.day,
                  hours: avail.active ? `${this.formatTime(avail.start)} - ${this.formatTime(avail.end)}` : 'Closed'
              }));
          },

          async addService() {
              try {
                  this.loading = true;
                  this.error = null;

                  const newService = await createService({
                      business_id: this.businessId,
                      name: this.newService.name.trim(),
                      description: this.newService.description.trim(),
                      duration: parseInt(this.newService.duration),
                      price: parseFloat(this.newService.price)
                  });

                  this.services.push(newService);
                  this.newService = { name: '', description: '', duration: 30, price: 0 };
                  this.showAddServiceModal = false;
              } catch (err) {
                  this.error = 'Failed to add service: ' + err.message;
                  console.error(err);
              } finally {
                  this.loading = false;
              }
          },

          editService(service) {
              this.serviceToEdit = { ...service };
              this.showEditServiceModal = true;
          },

          async updateService() {
              try {
                  this.loading = true;
                  this.error = null;

                  await updateService(this.serviceToEdit.id, {
                      name: this.serviceToEdit.name.trim(),
                      description: this.serviceToEdit.description.trim(),
                      duration: parseInt(this.serviceToEdit.duration),
                      price: parseFloat(this.serviceToEdit.price)
                  });

                  const index = this.services.findIndex(s => s.id === this.serviceToEdit.id);
                  if (index !== -1) {
                      this.services[index] = { ...this.serviceToEdit };
                  }
                  this.showEditServiceModal = false;
              } catch (err) {
                  this.error = 'Failed to update service: ' + err.message;
                  console.error(err);
              } finally {
                  this.loading = false;
              }
          },

          async deleteService(serviceId) {
              if (!confirm('Are you sure you want to delete this service?')) return;

              try {
                  this.loading = true;
                  this.error = null;

                  await deleteService(serviceId);
                  this.services = this.services.filter(s => s.id !== serviceId);
              } catch (err) {
                  this.error = 'Failed to delete service: ' + err.message;
                  console.error(err);
              } finally {
                  this.loading = false;
              }
          },

          updateAvailability(id) {
              const index = this.availability.findIndex(a => a.id === id);
              if (index !== -1) {
                  this.availability[index].active = !this.availability[index].active;
                  // Update business hours display
                  const bhIndex = this.businessHours.findIndex(bh => bh.id === id);
                  if (bhIndex !== -1) {
                      this.businessHours[bhIndex].hours = this.availability[index].active ?
                          `${this.formatTime(this.availability[index].start)} - ${this.formatTime(this.availability[index].end)}` :
                          'Closed';
                  }
              }
          },

          formatTime(time) {
              if (!time) return '';
              const [hours, minutes] = time.split(':');
              const h = parseInt(hours, 10);
              const period = h >= 12 ? 'PM' : 'AM';
              const hour = h > 12 ? h - 12 : (h === 0 ? 12 : h);
              return `${hour}:${minutes} ${period}`;
          },

          getAppointmentsToday() {
              const today = new Date().toISOString().split('T')[0];
              return this.appointments.filter(a => a.appointment_date === today);
          },

          getTotalRevenue() {
              return this.appointments
                  .filter(a => a.status === 'confirmed')
                  .reduce((total, appointment) => {
                      const service = this.services.find(s => s.name === appointment.service_name);
                      return total + (service ? service.price : 0);
                  }, 0);
          }
      }">

<!-- Error Display -->
<div x-show="error" class="fixed top-4 right-4 z-50 max-w-md">
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded shadow-lg">
        <div class="flex justify-between items-start">
            <p x-text="error"></p>
            <button @click="error = null" class="ml-4 text-red-500 hover:text-red-700">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                </svg>
            </button>
        </div>
    </div>
</div>

<!-- Loading Overlay -->
<div x-show="loading" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white p-6 rounded-lg shadow-xl">
        <div class="flex items-center">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
            <span class="ml-3 text-gray-900">Loading...</span>
        </div>
    </div>
</div>

<!-- Mobile sidebar backdrop -->
<div x-show="sidebarOpen" class="fixed inset-0 z-40 bg-gray-600 bg-opacity-75 md:hidden" @click="sidebarOpen = false"></div>

<!-- Sidebar -->
<div x-show="sidebarOpen" class="fixed inset-y-0 left-0 z-50 flex w-full max-w-xs flex-col bg-white md:hidden">
    <div class="flex items-center justify-between border-b border-gray-200 bg-white px-4 py-5">
        <div class="text-xl font-bold text-blue-600">AppointEase</div>
        <button @click="sidebarOpen = false" class="h-10 w-10 rounded-md -mr-2 flex items-center justify-center text-gray-500 hover:bg-gray-100">
            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
        </button>
    </div>

    <div class="flex-1 overflow-y-auto px-4 py-3">
        <nav class="space-y-1">
            <a @click="activeTab = 'dashboard'; sidebarOpen = false" class="flex cursor-pointer items-center px-2 py-2 text-sm font-medium rounded-md" :class="activeTab === 'dashboard' ? 'bg-blue-100 text-blue-600' : 'text-gray-600 hover:bg-gray-50'">
                <svg class="mr-3 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
                Dashboard
            </a>
            <a @click="activeTab = 'appointments'; sidebarOpen = false" class="flex cursor-pointer items-center px-2 py-2 text-sm font-medium rounded-md" :class="activeTab === 'appointments' ? 'bg-blue-100 text-blue-600' : 'text-gray-600 hover:bg-gray-50'">
                <svg class="mr-3 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                Appointments
            </a>
            <a @click="activeTab = 'services'; sidebarOpen = false" class="flex cursor-pointer items-center px-2 py-2 text-sm font-medium rounded-md" :class="activeTab === 'services' ? 'bg-blue-100 text-blue-600' : 'text-gray-600 hover:bg-gray-50'">
                <svg class="mr-3 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 00-2 2H8a2 2 0 00-2-2V6m8 0H8m8 0l2 2-2 2H8l-2-2 2-2h8z" />
                </svg>
                Services
            </a>
            <a @click="activeTab = 'availability'; sidebarOpen = false" class="flex cursor-pointer items-center px-2 py-2 text-sm font-medium rounded-md" :class="activeTab === 'availability' ? 'bg-blue-100 text-blue-600' : 'text-gray-600 hover:bg-gray-50'">
                <svg class="mr-3 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Availability
            </a>
        </nav>
    </div>
</div>

<!-- Desktop sidebar -->
<div class="hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0">
    <div class="flex-1 flex flex-col min-h-0 border-r border-gray-200 bg-white">
        <div class="flex-1 flex flex-col pt-5 pb-4 overflow-y-auto">
            <div class="flex items-center flex-shrink-0 px-4 mb-5">
                <div class="text-xl font-bold text-blue-600">AppointEase</div>
            </div>
            <nav class="mt-5 flex-1 px-2 space-y-1">
                <a @click="activeTab = 'services'" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md cursor-pointer" :class="activeTab === 'services' ? 'bg-blue-100 text-blue-600' : 'text-gray-600 hover:bg-gray-50'">
                    <svg class="mr-3 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 00-2 2H8a2 2 0 00-2-2V6m8 0H8m8 0l2 2-2 2H8l-2-2 2-2h8z" />
                    </svg>
                    Services
                </a>
                <a @click="activeTab = 'availability'" class="group flex items-center px-2 py-2 text-sm font-medium rounded-md cursor-pointer" :class="activeTab === 'availability' ? 'bg-blue-100 text-blue-600' : 'text-gray-600 hover:bg-gray-50'">
                    <svg class="mr-3 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Availability
                </a>
            </nav>
        </div>
    </div>
</div>

<!-- Main content -->
<div class="md:pl-64 flex flex-col flex-1">
    <!-- Top navigation -->
    <div class="sticky top-0 z-10 md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 bg-gray-50">
        <button @click="sidebarOpen = true" class="-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500">
            <span class="sr-only">Open sidebar</span>
            <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
        </button>
    </div>

    <main class="flex-1">
        <div class="py-6">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8">
                <!-- Services Tab -->
                <div x-show="activeTab === 'services'">
                    <div class="sm:flex sm:items-center">
                        <div class="sm:flex-auto">
                            <h1 class="text-2xl font-semibold text-gray-900">Services</h1>
                            <p class="mt-2 text-sm text-gray-700">Manage your business services and pricing.</p>
                        </div>
                        <div class="mt-4 sm:mt-0 sm:ml-16 sm:flex-none">
                            <button @click="showAddServiceModal = true" type="button" class="inline-flex items-center justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:w-auto">
                                Add Service
                            </button>
                        </div>
                    </div>

                    <!-- Services List -->
                    <div class="mt-8 flex flex-col">
                        <div class="-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8">
                            <div class="inline-block min-w-full py-2 align-middle md:px-6 lg:px-8">
                                <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                                    <table class="min-w-full divide-y divide-gray-300">
                                        <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Service</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Duration</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Price</th>
                                            <th class="relative px-6 py-3"><span class="sr-only">Actions</span></th>
                                        </tr>
                                        </thead>
                                        <tbody class="bg-white divide-y divide-gray-200">
                                        <template x-for="service in services" :key="service.id">
                                            <tr>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <div class="text-sm font-medium text-gray-900" x-text="service.name"></div>
                                                    <div class="text-sm text-gray-500" x-text="service.description || 'No description'"></div>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                                    <span x-text="service.duration"></span> min
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                                    $<span x-text="service.price"></span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                                    <button @click="editService(service)" class="text-blue-600 hover:text-blue-900 mr-3">Edit</button>
                                                    <button @click="deleteService(service.id)" class="text-red-600 hover:text-red-900">Delete</button>
                                                </td>
                                            </tr>
                                        </template>
                                        </tbody>
                                    </table>

                                    <div x-show="services.length === 0 && !loading" class="text-center py-12">
                                        <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                                            <path d="M34 40h10v-4a6 6 0 00-10.712-3.714M34 40H14m20 0v-4a9.971 9.971 0 00-.712-3.714M14 40H4v-4a6 6 0 0110.713-3.714M14 40v-4c0-1.313.253-2.566.713-3.714m0 0A10.003 10.003 0 0124 26c4.21 0 7.813 2.602 9.288 6.286M30 14a6 6 0 11-12 0 6 6 0 0112 0zm12 6a4 4 0 11-8 0 4 4 0 018 0zm-28 0a4 4 0 11-8 0 4 4 0 018 0z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg>
                                        <h3 class="mt-2 text-sm font-medium text-gray-900">No services</h3>
                                        <p class="mt-1 text-sm text-gray-500">Get started by creating your first service.</p>
                                        <div class="mt-6">
                                            <button @click="showAddServiceModal = true" type="button" class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                                Add Service
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Availability Tab -->
                <div x-show="activeTab === 'availability'">
                    <div class="sm:flex sm:items-center">
                        <div class="sm:flex-auto">
                            <h1 class="text-2xl font-semibold text-gray-900">Business Hours</h1>
                            <p class="mt-2 text-sm text-gray-700">Set your availability for each day of the week.</p>
                        </div>
                    </div>

                    <div class="mt-8">
                        <div class="bg-white shadow overflow-hidden sm:rounded-md">
                            <ul class="divide-y divide-gray-200">
                                <template x-for="avail in availability" :key="avail.id">
                                    <li class="px-6 py-4">
                                        <div class="flex items-center justify-between">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0">
                                                    <span class="text-sm font-medium text-gray-900" x-text="avail.day"></span>
                                                </div>
                                                <div class="ml-4 flex items-center space-x-4" x-show="avail.active">
                                                    <div>
                                                        <label class="block text-xs font-medium text-gray-700">Start Time</label>
                                                        <input type="time" x-model="avail.start" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                                    </div>
                                                    <div>
                                                        <label class="block text-xs font-medium text-gray-700">End Time</label>
                                                        <input type="time" x-model="avail.end" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                                    </div>
                                                </div>
                                                <div class="ml-4" x-show="!avail.active">
                                                    <span class="text-sm text-gray-500">Closed</span>
                                                </div>
                                            </div>
                                            <div class="flex items-center">
                                                <button @click="updateAvailability(avail.id)" :class="avail.active ? 'bg-blue-600' : 'bg-gray-200'" class="relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                                    <span :class="avail.active ? 'translate-x-5' : 'translate-x-0'" class="pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200"></span>
                                                </button>
                                            </div>
                                        </div>
                                    </li>
                                </template>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<!-- Add Service Modal -->
<div x-show="showAddServiceModal" class="fixed inset-0 z-50 overflow-y-auto">
    <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
        <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
            <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Add New Service</h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Service Name</label>
                        <input type="text" x-model="newService.name" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Description</label>
                        <textarea x-model="newService.description" rows="3" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"></textarea>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Duration (minutes)</label>
                            <input type="number" x-model="newService.duration" min="15" step="15" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Price ($)</label>
                            <input type="number" x-model="newService.price" min="0" step="0.01" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                <button @click="addService()" type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm">
                    Add Service
                </button>
                <button @click="showAddServiceModal = false" type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                    Cancel
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Edit Service Modal -->
<div x-show="showEditServiceModal" class="fixed inset-0 z-50 overflow-y-auto">
    <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
        <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
            <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Edit Service</h3>
                <div class="space-y-4" x-show="serviceToEdit">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Service Name</label>
                        <input type="text" x-model="serviceToEdit.name" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Description</label>
                        <textarea x-model="serviceToEdit.description" rows="3" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"></textarea>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Duration (minutes)</label>
                            <input type="number" x-model="serviceToEdit.duration" min="15" step="15" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Price ($)</label>
                            <input type="number" x-model="serviceToEdit.price" min="0" step="0.01" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                <button @click="updateService()" type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm">
                    Update Service
                </button>
                <button @click="showEditServiceModal = false" type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                    Cancel
                </button>
            </div>
        </div>
    </div>
</div>

<script src="/js/api.js"></script>
</body>
</html>